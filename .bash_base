#!/usr/bin/env bash

DEBUG=0

CWD="$(dirname ${BASH_SOURCE[0]})"
source "$CWD/inc/bash.funcs.sh" # Contains the get_secret/get_hw_type/etc func defs

function mysource {
    TARGET="$CWD/$@"
    debuglog "Loading ${TARGET#"$CWD/inc/"}"
    source $TARGET
}

[[ -n $SECRETS_LOADED ]] || mysource inc/secrets.sh

HWID=$(get_secret hostids $(get_hwid))
HWTYPE=$(get_hw_type)
DEVELOPMENT_DIR=$(get_secret devdirs $(get_hwid))
debuglog " --> Detected hwid: $HWID"
debuglog " --> Detected hwtype: $HWTYPE"
debuglog " --> Detected devdir: $DEVELOPMENT_DIR"

mysource inc/bash.aliases.cd.sh
mysource inc/bash.aliases.cmd.sh
mysource inc/bash.aliases.ssh.sh

mysource inc/bash.gitprompt.sh
mysource inc/ext/git-completion.sh

mysource inc/bash.post.sh
